{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst pixabayApi = async (search_word, page = 1, per_page = 15) => {\n  const request_params = {\n    key: '42955810-525eb75005697c7b81a0edb8d',\n    q: search_word,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  return await axios.get('', { params: request_params });\n};\n\nexport default pixabayApi;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst images_element = document.querySelector('.images');\nconst loader_element = document.querySelector('#loader_place');\nconst load_more_button = document.querySelector('#load_more_button');\nconst no_more_for_load_elemet = document.querySelector('#no_more_for_load');\n\nconst lightbox = new SimpleLightbox('.images li a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nexport const loadStart = () => {\n  loader_element.innerHTML = '<span class=\"loader\"></span>';\n};\nexport const loadFinish = () => {\n  loader_element.innerHTML = '';\n};\n\nexport const displayLoadMore = () => {\n  load_more_button.classList.remove('visually-hidden');\n};\n\nexport const hideLoadMore = () => {\n  load_more_button.classList.add('visually-hidden');\n};\n\nexport const displayNoMoreForLoad = () => {\n  no_more_for_load_elemet.classList.remove('visually-hidden');\n};\n\nexport const hideNoMoreForLoad = () => {\n  no_more_for_load_elemet.classList.add('visually-hidden');\n};\n\nexport const scroll = () => {\n  const image_element = document.querySelector('.image');\n\n  if (image_element) {\n    const image_element_height = image_element.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: image_element_height * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nexport const renderImages = (data, new_request = true) => {\n  if (new_request) {\n    images_element.innerHTML = '';\n  }\n\n  if (data.hits.length === 0) {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please, try again!`,\n      position: 'topRight',\n    });\n  } else {\n    const image_elements = data.hits\n      .map(hit => {\n        return `<li class=\"image\">\n          <a href=\"${hit.largeImageURL}\"><img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"></a>\n          <ul class=\"info\">\n            <li class=\"info-block\">\n              <p3>Likes</p3>\n              <span>${hit.likes}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Views</p3>\n              <span>${hit.views}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Comments</p3>\n              <span>${hit.comments}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Downloads</p3>\n              <span>${hit.downloads}</span>\n            </li>\n          </ul>\n        </li>`;\n      })\n      .join('');\n\n    images_element.innerHTML += image_elements;\n    lightbox.refresh();\n  }\n};\n","import pixabayApi from './js/pixabay-api.js';\nimport {\n  renderImages,\n  loadStart,\n  loadFinish,\n  displayLoadMore,\n  hideLoadMore,\n  displayNoMoreForLoad,\n  hideNoMoreForLoad,\n  scroll,\n} from './js/render-functions.js';\n\nconst search_element = document.querySelector('#search-image');\nconst search_button = document.querySelector('#search-button');\nconst load_more_button = document.querySelector('#load_more_button');\nconst per_page = 15;\n\nlet page = 1;\n\nconst get_new_images = (new_request = true) => {\n  hideLoadMore();\n  hideNoMoreForLoad();\n\n  if (search_element.value.trim().length != 0) {\n    loadStart();\n\n    pixabayApi(search_element.value.trim(), page, per_page).then(response => {\n      const displayed_count = page * per_page;\n      const data = response.data;\n\n      loadFinish();\n      renderImages(data, new_request);\n\n      if (\n        data.hits.length > 0 &&\n        data.totalHits > 0 &&\n        displayed_count < data.totalHits\n      ) {\n        displayLoadMore();\n      } else if (!new_request) {\n        displayNoMoreForLoad();\n      }\n\n      if (!new_request) scroll();\n    });\n  }\n};\n\nconst search_action = () => {\n  page = 1;\n  get_new_images();\n};\n\nconst load_more_action = () => {\n  page++;\n  get_new_images(false);\n};\n\nsearch_button.addEventListener('click', search_action);\nload_more_button.addEventListener('click', load_more_action);\n"],"names":["axios","pixabayApi","search_word","page","per_page","request_params","images_element","loader_element","load_more_button","no_more_for_load_elemet","lightbox","SimpleLightbox","loadStart","loadFinish","displayLoadMore","hideLoadMore","displayNoMoreForLoad","hideNoMoreForLoad","scroll","image_element","image_element_height","renderImages","data","new_request","iziToast","image_elements","hit","search_element","search_button","get_new_images","response","displayed_count","search_action","load_more_action"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAa,MAAOC,EAAaC,EAAO,EAAGC,EAAW,KAAO,CACjE,MAAMC,EAAiB,CACrB,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAEE,OAAO,MAAMH,EAAM,IAAI,GAAI,CAAE,OAAQK,CAAc,CAAE,CACvD,ECVMC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAmB,SAAS,cAAc,mBAAmB,EAC7DC,EAA0B,SAAS,cAAc,mBAAmB,EAEpEC,EAAW,IAAIC,EAAe,eAAgB,CAClD,aAAc,IACd,aAAc,KAChB,CAAC,EAEYC,EAAY,IAAM,CAC7BL,EAAe,UAAY,8BAC7B,EACaM,EAAa,IAAM,CAC9BN,EAAe,UAAY,EAC7B,EAEaO,EAAkB,IAAM,CACnCN,EAAiB,UAAU,OAAO,iBAAiB,CACrD,EAEaO,EAAe,IAAM,CAChCP,EAAiB,UAAU,IAAI,iBAAiB,CAClD,EAEaQ,EAAuB,IAAM,CACxCP,EAAwB,UAAU,OAAO,iBAAiB,CAC5D,EAEaQ,EAAoB,IAAM,CACrCR,EAAwB,UAAU,IAAI,iBAAiB,CACzD,EAEaS,EAAS,IAAM,CAC1B,MAAMC,EAAgB,SAAS,cAAc,QAAQ,EAErD,GAAIA,EAAe,CACjB,MAAMC,EAAuBD,EAAc,sBAAqB,EAAG,OAEnE,OAAO,SAAS,CACd,IAAKC,EAAuB,EAC5B,SAAU,QAChB,CAAK,CACF,CACH,EAEaC,EAAe,CAACC,EAAMC,EAAc,KAAS,CAKxD,GAJIA,IACFjB,EAAe,UAAY,IAGzBgB,EAAK,KAAK,SAAW,EACvBE,EAAS,MAAM,CACb,QAAS,4EACT,SAAU,UAChB,CAAK,MACI,CACL,MAAMC,EAAiBH,EAAK,KACzB,IAAII,GACI;AAAA,qBACMA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,sBAIjEA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,sBAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,sBAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,sBAIZA,EAAI,SAAS;AAAA;AAAA;AAAA,cAI5B,EACA,KAAK,EAAE,EAEVpB,EAAe,WAAamB,EAC5Bf,EAAS,QAAO,CACjB,CACH,EChFMiB,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAgB,SAAS,cAAc,gBAAgB,EACvDpB,EAAmB,SAAS,cAAc,mBAAmB,EAC7DJ,EAAW,GAEjB,IAAID,EAAO,EAEX,MAAM0B,EAAiB,CAACN,EAAc,KAAS,CAC7CR,IACAE,IAEIU,EAAe,MAAM,KAAI,EAAG,QAAU,IACxCf,IAEAX,EAAW0B,EAAe,MAAM,KAAI,EAAIxB,EAAMC,CAAQ,EAAE,KAAK0B,GAAY,CACvE,MAAMC,EAAkB5B,EAAOC,EACzBkB,EAAOQ,EAAS,KAEtBjB,IACAQ,EAAaC,EAAMC,CAAW,EAG5BD,EAAK,KAAK,OAAS,GACnBA,EAAK,UAAY,GACjBS,EAAkBT,EAAK,UAEvBR,IACUS,GACVP,IAGGO,GAAaL,GACxB,CAAK,EAEL,EAEMc,EAAgB,IAAM,CAC1B7B,EAAO,EACP0B,GACF,EAEMI,EAAmB,IAAM,CAC7B9B,IACA0B,EAAe,EAAK,CACtB,EAEAD,EAAc,iBAAiB,QAASI,CAAa,EACrDxB,EAAiB,iBAAiB,QAASyB,CAAgB"}